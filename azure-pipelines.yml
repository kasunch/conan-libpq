jobs:
- job: Windows
  pool:
    vmImage: "windows-2019"
    timeoutInMinutes: 120
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: "3.7"
      addToPath: true
      architecture: 'x64'  
  - script: |
      pip install --upgrade pip
      pip install conan --upgrade
      pip install conan_package_tools
      conan user
      python build.py
    env:
      CONAN_USERNAME: $(CONAN_USERNAME)
      CONAN_CHANNEL: "testing"
      CONAN_UPLOAD: $(CONAN_UPLOAD)
      CONAN_LOGIN_USERNAME: $(CONAN_LOGIN_USERNAME)
      CONAN_PASSWORD: $(CONAN_PASSWORD)
  strategy:
    matrix:
      MSVC16:
        CONAN_VISUAL_VERSIONS: 16
        CONAN_BUILD_TYPES: Debug
        CONAN_ARCHS: "x86_64"
